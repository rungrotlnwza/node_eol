<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="assets/bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <script src="assets/bootstrap-5.0.2-dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-wrap: wrap;
            margin: 0;
            /* เปลี่ยนจากดำสนิทเป็นเทาเข้มนุ่มตา */
        }

        .sidebar {
            position: fixed;
            top: 56px;
            /* ความสูงของ navbar */
            bottom: 0;
            left: 0;
            width: 250px;
            overflow-y: auto;
            z-index: 1000;
            background-color: #ffffff;
            border-right: 1px solid #ddd;
        }

        .main-content {
            margin-left: 250px;
            padding: 2rem;
            padding-top: 80px;
            /* เว้นจาก navbar เพิ่มอีกนิดให้หายทับ */
            min-height: 100vh;
            color: #f8f9fa;
        }

        .tabcontent {
            display: none;
        }

        .tabcontent.active {
            display: block;
        }

        @media (max-width: 767.98px) {
            .sidebar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                padding-top: 80px;
            }
        }
    </style>


</head>

<body class="bg-dark text-light">
    <div id="navbar"></div>
    <div class="welcome container-fluid d-none d-md-block"></div>
    <!-- Navbar มือถือ -->
    <nav class="navbar navbar-light bg-light d-md-none w-100 top-0 z-3 mt-5" style="height: 70px;">
        <div class="container-fluid">
            <span class="navbar-brand">Dashboard</span>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>
    <!-- Sidebar Desktop -->
    <div class="sidebar bg-light p-3 d-none d-md-block position-fixed"
        style="top: 56px; bottom: 0; left: 0; width: 250px; overflow-y: auto;">

        <div class="list-group" id="dashboardMenu">
            <button class="list-group-item list-group-item-action" data-target="profile">ข้อมูลส่วนตัว</button>
            <button class="list-group-item list-group-item-action" data-target="edit-profile">แก้ไขโปรไฟล์</button>
            <button class="list-group-item list-group-item-action"
                data-target="change-password">เปลี่ยนรหัสผ่าน</button>
            <button class="list-group-item list-group-item-action"
                data-target="learning-history">ประวัติการเรียน</button>
            <button class="list-group-item list-group-item-action" data-target="my-courses">คอร์สของฉัน</button>
            <hr class="my-2">
            <div class="fw-bold px-3 text-muted small">ADMIN ONLY</div>
            <button class="list-group-item list-group-item-action" data-target="overview">สรุประบบ</button>
            <button class="list-group-item list-group-item-action" data-target="user-list">ผู้ใช้ทั้งหมด</button>
            <button class="list-group-item list-group-item-action" data-target="user-detail">ข้อมูลผู้ใช้</button>
            <button class="list-group-item list-group-item-action" data-target="course-list">รายการคอร์ส</button>
            <button class="list-group-item list-group-item-action" data-target="course-create">สร้างคอร์ส</button>
            <button class="list-group-item list-group-item-action" data-target="course-edit">แก้ไขคอร์ส</button>
            <button class="list-group-item list-group-item-action" data-target="course-preview">พรีวิวคอร์ส</button>
            <button class="list-group-item list-group-item-action" data-target="lesson-list">บทเรียนทั้งหมด</button>
            <button class="list-group-item list-group-item-action" data-target="lesson-edit">แก้ไขบทเรียน</button>
            <button class="list-group-item list-group-item-action" data-target="article-list">รายการบทความ</button>
            <button class="list-group-item list-group-item-action" data-target="article-edit">เขียน/แก้บทความ</button>
            <button class="list-group-item list-group-item-action" data-target="article-preview">พรีวิวบทความ</button>
            <button class="list-group-item list-group-item-action" data-target="content-library">คลังไฟล์</button>
            <button class="list-group-item list-group-item-action" data-target="test-bank">คลังข้อสอบ</button>
            <button class="list-group-item list-group-item-action" data-target="announcement">ประกาศหน้าเว็บ</button>
            <button class="list-group-item list-group-item-action" data-target="settings">ตั้งค่าระบบ</button>
            <button class="list-group-item list-group-item-action" data-target="traffic-stats">สถิติการใช้งาน</button>
        </div>
    </div>


    <!-- Main Content -->
    <div class="main-content">
        <!-- Content แสดงตาม section -->
        <div id="profile" class="tabcontent active">
            <h4>แก้ไขโปรไฟล์</h4>
        </div>
        <div id="edit-profile" class="tabcontent">
            <h4>แก้ไขโปรไฟล์</h4>
        </div>
        <div id="change-password" class="tabcontent">
            <h4>เปลี่ยนรหัสผ่าน</h4>
        </div>
        <div id="learning-history" class="tabcontent">
            <h4>ประวัติการเรียน</h4>
        </div>
        <div id="my-courses" class="tabcontent">
            <h4>คอร์สของฉัน</h4>
        </div>
        <div id="overview" class="tabcontent">
            <h4>สรุประบบ</h4>
        </div>
        <div id="user-list" class="tabcontent">
            <h4>ผู้ใช้ทั้งหมด</h4>
        </div>
        <div id="user-detail" class="tabcontent">
            <h4>ข้อมูลผู้ใช้</h4>
        </div>
        <div id="course-list" class="tabcontent">
            <h4>รายการคอร์ส</h4>
        </div>
        <div id="course-create" class="tabcontent">
            <h4>สร้างคอร์ส</h4>
        </div>
        <div id="course-edit" class="tabcontent">
            <h4>แก้ไขคอร์ส</h4>
        </div>
        <div id="course-preview" class="tabcontent">
            <h4>พรีวิวคอร์ส</h4>
        </div>
        <div id="lesson-list" class="tabcontent">
            <h4>บทเรียนทั้งหมด</h4>
        </div>
        <div id="lesson-edit" class="tabcontent">
            <h4>แก้ไขบทเรียน</h4>
        </div>
        <div id="article-list" class="tabcontent">
            <h4>รายการบทความ</h4>
        </div>
        <div id="article-edit" class="tabcontent">
            <h4>เขียน/แก้บทความ</h4>
        </div>
        <div id="article-preview" class="tabcontent">
            <h4>พรีวิวบทความ</h4>
        </div>
        <div id="content-library" class="tabcontent">
            <h4>คลังไฟล์</h4>
        </div>
        <div id="test-bank" class="tabcontent">
            <h4>คลังข้อสอบ</h4>
        </div>
        <div id="announcement" class="tabcontent">
            <h4>ประกาศหน้าเว็บ</h4>
        </div>
        <div id="settings" class="tabcontent">
            <h4>ตั้งค่าระบบ</h4>
        </div>
        <div id="traffic-stats" class="tabcontent">
            <h4>สถิติการใช้งาน</h4>
        </div>
    </div>

    <!-- Offcanvas Mobile -->
    <div class="offcanvas offcanvas-start d-md-none" tabindex="-1" id="mobileSidebar">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">เมนู</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <div class="list-group" id="mobileMenuClone"></div>
        </div>
    </div>
    <script>
        // Clone sidebar menu into offcanvas
        const originalMenu = document.getElementById('dashboardMenu');
        const mobileMenu = document.getElementById('mobileMenuClone');
        mobileMenu.innerHTML = originalMenu.innerHTML;

        // ฟังก์ชันหลัก: เปิด tab ตาม target id
        function showTabById(targetId) {
            const tabs = document.querySelectorAll('.tabcontent');
            const buttons = document.querySelectorAll('[data-target]');

            tabs.forEach(t => t.classList.remove('active'));
            buttons.forEach(b => b.classList.remove('active'));

            const activeTab = document.getElementById(targetId);
            const activeBtn = document.querySelector(`[data-target="${targetId}"]`);

            if (activeTab) activeTab.classList.add('active');
            if (activeBtn) activeBtn.classList.add('active');

            // อัปเดต URL hash
            window.location.hash = targetId;
        }

        // ผูก event กับเมนูทั้งหมด
        function bindMenuEvents() {
            const allButtons = document.querySelectorAll('[data-target]');
            allButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const target = btn.getAttribute('data-target');
                    showTabById(target);

                    // ปิด offcanvas ถ้ามี (สำหรับ mobile)
                    const canvas = bootstrap.Offcanvas.getInstance(document.getElementById('mobileSidebar'));
                    if (canvas) canvas.hide();
                });
            });
        }

        // เรียก tab ที่สอดคล้องกับ URL hash ตอนโหลดหน้า
        function loadInitialTab() {
            const hash = window.location.hash.replace('#', '');
            const initialTab = hash || 'profile'; // ถ้าไม่มี hash ให้ default เป็น profile
            showTabById(initialTab);
        }

        // เรียกทุกอย่างตอนโหลด
        bindMenuEvents();
        loadInitialTab();
    </script>

    <script type="module" src="assets/js/script.js"></script>
</body>

</html>